# Лабораторная работа №2
## Тема лабораторной работы: Указатели, арифметика указателей.

## Задание 1
### Постановка задачи:
Внутри функции `int main(void) { /*...*/ }` определите указатель double `***pointer = NULL;`. Инициализируйте этот указатель адресом другого указателя типа `double **`, который указывает на переменную `double *`, которая указывает на `double`. Используйте `pointer` для записи и чтения значения `2.0` в сегмент оперативной памяти для `double`.
### Требования: 
• Используйте функции типа `*alloc(...)` для выделения оперативной памяти под динамические объекты `double **`, `double *` и `double`. 
• Запишите и выведите число, указанное в блоке double на диаграмме, на экран, используя указатель `double ***pointer = NULL;`. 
• Используйте функцию `free(...)` для освобождения оперативной памяти, выделенной под динамические объекты с переменной `pointer`. 
### Математическая модель

![lab2.1.1](lab2.1.1.png)
### Список идентификаторов:

| Идентификатор | Тип данных  | Уровень указателя   | Описание                                   |
| ------------- | ----------- | ------------------- | ------------------------------------------ |
| `pointer`     | `double***` | Тройной указатель   | Главный указатель на указатель на `double` |
| `*pointer`    | `double**`  | Двойной указатель   | Указатель на указатель на `double`         |
| `**pointer`   | `double*`   | Одинарный указатель | Указатель на значение `double`             |
| `***pointer`  | `double`    | Значение            | Непосредственно хранимое значение `double` |
### Код программы:

```c
#include <stdio.h> 
#include <stdlib.h> 
int main() {

    double ***pointer = NULL; //тройной указатель на тип double

    pointer = malloc(sizeof(double**)); // постепенно выделяется память под каждый уровень
    *pointer = malloc(sizeof(double*)); 
    **pointer = malloc(sizeof(double)); 
    ***pointer = 2.0; 

    printf("%.2lf", ***pointer); 
    
    free(**pointer); //память освобождается в обратном порядке
    free(*pointer); 
    free(pointer);
}
```
### Результаты работы программы:

![lab2.1.2.png](lab2.1.2.png)
## Задание 2 Сложение двух чисел
### Постановка задачи:
Напишите программу, которая складывает два числа с использованием указателей на эти числа.
### Математическая модель:

$$sum = *pr1(num1) + *pr2(num2)$$
### Список идентификаторов:

| Идентификатор | Тип данных | Описание                     |
| ------------- | ---------- | ---------------------------- |
| `num1`        | `double`   | Первое введённое число       |
| `num2`        | `double`   | Второе введённое число       |
| `sum`         | `double`   | Сумма чисел num1 и num2      |
| `pr1`         | `double*`  | Указатель на переменную num1 |
| `pr2`         | `double*`  | Указатель на переменную num2 |
### Код программы:

```c
#include <stdio.h>

int main() {
    double num1, num2, sum;
    double *pr1 = &num1, *pr2 = &num2; //создается два указателя на переменные
    printf("Введите первое число: ");
    scanf("%lf", pr1); //вводятся число прямо по адресам
    printf("Введите второе число: ");
    scanf("%lf", pr2);
    sum = *pr1 + *pr2; // значения складываются через адресацию
    printf("Сумма чисел: %.2lf\n", sum);
    return 0;
}
```
### Результаты работы программы:

![lab2.2.png](lab2.2.png)
## Задание 3 Нахождение максимума из двух чисел
### Постановка задачи:
Напишите программу, которая находит максимальное число из двух чисел, используя указатели на эти числа. 
### Список идентификаторов:

| Идентификатор | Тип данных | Описание                     |
| ------------- | ---------- | ---------------------------- |
| `num1`        | `double`   | Первое введённое число       |
| `num2`        | `double`   | Второе введённое число       |
| `pr1`         | `double*`  | Указатель на переменную num1 |
| `pr2`         | `double*`  | Указатель на переменную num2 |
### Код программы:

```c
#include <stdio.h>

int main() {
    double num1, num2;
    double *pr1 = &num1, *pr2 = &num2; 
    printf("Введите первое число: ");
    scanf("%lf", pr1); //числа вводятся прямо по адресам
    printf("Введите второе число: ");
    scanf("%lf", pr2);
    if (*pr1 > *pr2) //значения сравниваются через разыменование
    {
        printf("Максимальное число: %.2lf\n", *pr1);
    } else {
        printf("Максимальное число: %.2lf\n", *pr2);
    }
    return 0;
}
```
### Результаты работы программы: 

![lab2.3.png](lab2.3.png)
## Задание 4 Динамический массив с плавающей точкой

### Постановка задачи:
Напишите программу, которая создаёт одномерный динамический массив из чисел с плавающей точкой двойной точности, заполняет его значениями с клавиатуры и распечатывает все элементы этого массива, используя арифметику указателей (`оператор+`), а не оператор доступа к элементу массива `[]`. 
### Список идентификаторов:

| Идентификатор | Тип данных | Описание                          |
|---------------|------------|-----------------------------------|
| `n`           | `int`      | Размер динамического массива      |
| `arr`         | `double*`  | Указатель на массив чисел типа double |
| `i`           | `int`      | Счетчик для итераций в циклах     
### Код программы:

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int n;
    double *arr;
    printf("Введите размер массива: ");
    scanf("%d", &n);
    arr = (double *)malloc(n * sizeof(double)); //выделяет память под массив через malloc
    if (arr == NULL)
    {
        printf("Ошибка выделения памяти!\n"); //проверка успешности выделения
        return 1;
    }
    printf("Введите элементы массива:\n");
    for (int i = 0; i < n; i++)
    {
        scanf("%lf", arr + i);
    }
    printf("Элементы массива:\n"); //выводит элементы массива через указатель arr
    for (int i = 0; i < n; i++)
    {
        printf("%.2lf ", *(arr + i));
    }
    printf("\n");
    free(arr); //освобождает память
    return 0;
}
```
### Результаты работы программы: 

![lab2.4.png](lab2.4.png)
## Задание 5 Обратный порядок элементов массива

### Постановка задачи:
Выведите элементы динамического массива целых чисел в обратном порядке, используя указатель и операцию декремента (`--`). 
### Список идентификаторов:
| Идентификатор | Тип данных | Описание                       |     |
| ------------- | ---------- | ------------------------------ | --- |
| `n`           | `int`      | Размер массива                 |     |
| `arr`         | `int*`     | Указатель на массив            |     |
| `i`           | `int`      | Счетчик циклов                 |     |
| `pr`          | `int*`     | Указатель для обратного обхода |     |
### Код программы:

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int n;
    int *arr;
    printf("Введите размер массива: ");
    scanf("%d", &n);
    arr = (int *)malloc(n * sizeof(int)); //выделяется память под массив через malloc
    if (arr == NULL)
    {
        printf("Ошибка выделения памяти!\n");
        return 1;
    }
    printf("Введите элементы массива:\n");
    for (int i = 0; i < n; i++)
    {
        scanf("%d", &arr[i]);
    }
    printf("Элементы массива в обратном порядке:\n");
    int *pr = arr + n - 1; //указатель pr ставится на конец массива
    for (int i = 0; i < n; i++)
    {
        printf("%d ", *pr);
        pr--; //указатель двигается в назад выводя элементы
    }
    printf("\n");
    free(arr);
    return 0;
}
```
### Результаты работы программы: 
![lab2.5.png](lab2.5.png)
## Задание 6 Побайтовый вывод переменной

### Постановка задачи:
Определите переменную целого типа `int a = 1234567890;` и выведите побайтово её содержимое на экран, используя указатель `char *`.
### Список идентификаторов:
| Идентификатор | Тип данных       | Описание                          |
| ------------- | ---------------- | --------------------------------- |
| `a`           | `int`            | Исходное целое число              |
| `bpr`         | `unsigned char*` | Указатель для побайтового доступа |
| `i`           | `int`            | Счетчик байтов                    |
### Код программы:
```c
#include <stdio.h>

int main() {
    int a = 1234567890;
    unsigned char * bpr = (unsigned char *)&a; //указатель bpr на число а
    printf("Побайтовый вывод переменной a (%d):\n", a);
    for (int i = 0; i < sizeof(a); i++) 
    {
        printf("%p Байт %d: %d\n", bpr + i, i, *(bpr + i)); //выводятся адрес, номер байта, значение
    }
}
```
### Результаты работы программы: 
![lab2.6.png](lab2.6.png)
## Задание 7 Двумерный динамический массив

### Постановка задачи:
Выделите память под двумерный динамический массив, используя массив указателей на строки (см. лекции), и затем корректно освободите оперативную память. 
### Список идентификаторов:
| Идентификатор | Тип данных | Описание                    |
| ------------- | ---------- | --------------------------- |
| `rows`        | `int`      | Количество строк массива    |
| `cols`        | `int`      | Количество столбцов массива |
| `array`       | `int**`    | Двойной указатель на массив |
| `i`           | `int`      | Счетчик строк               |
| `j`           | `int`      | Счетчик столбцов            |
### Код программы:
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int rows, cols;
    int **array; 
    printf("Введите количество строк: ");
    scanf("%d", &rows);
    printf("Введите количество столбцов: ");
    scanf("%d", &cols);
    array = (int **)malloc(rows * sizeof(int *)); //выделяется массив указателей на строки
    if (array == NULL) 
    {
        printf("\nОшибка выделения памяти\n");
        return 1;
    }

    for (int i = 0; i < rows; i++) {
        array[i] = (int *)malloc(cols * sizeof(int)); //выделяется массив для столбцов
        if (array[i] == NULL) 
        {
            printf("Ошибка выделения памяти\n");    
            for (int j = 0; j < i; j++) 
            {
                free(array[j]);
            }
            free(array);
            return 1;
        }
    }
    for (int i = 0; i < rows; i++) //массив заполняется
    {
        for (int j = 0; j < cols; j++) //здесь тоже
        {
            array[i][j] = i * cols + j;
        }
    }
    printf("Двумерный массив:\n"); 
    for (int i = 0; i < rows; i++) 
    {
        for (int j = 0; j < cols; j++) 
        {
            printf("%d ", array[i][j]);
        }
        printf("\n");
    }
    for (int i = 0; i < rows; i++) 
    {
        free(array[i]); //освобождаются все строки
    }
    free(array); //освобождается массив указателей
    return 0;
}
```
### Результаты работы программы: 

![lab2.7.png](lab2.7.png)


***
# Информация о студенте
Елькин Михаил, 1 курс, группа ИВТ-1.2
